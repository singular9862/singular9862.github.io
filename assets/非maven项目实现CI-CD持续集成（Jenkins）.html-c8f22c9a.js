import{_ as e,X as c,Y as o,Z as a,$ as n,a1 as t,a0 as p,E as l}from"./framework-1e27cadd.js";const u="/assets/7e097c58a2404f28b6ee32561d88087b-5e6c3c6e.png",i="/assets/c15f35d3184246e4aada28d2caa7a979-eebbb39f.png",k="/assets/b876a66b383045d5b60a907ba1bca0a4-a2710171.png",r="/assets/604ba10dacab4b058496503550e72f64-74050333.png",d="/assets/bc546eeddcfe4f6594ddc660baa9b035-9d448081.png",g="/assets/ad03a05bbee84501ba19250a4420e6b8-55d4e93b.png",v="/assets/8e40c09709ba466c8e83a1b443bef0f3-b21a91d3.png",m="/assets/55d1beb7c6fe4b0ea284b756efe59aa0-961cfa2f.png",b="/assets/1782fb4097aa4f7082033a7af827995f-6087c925.png",q="/assets/bdf09bf68ba24f88b8766eec78bd7c96-9fd65e00.png",f="/assets/a9bcce1b93d94e858a4e03ac173b0a76-3f68e9f5.png",_="/assets/1e143815b12c4e169fc996be3f851ccd-aff0c059.png",h="/assets/1c6ca4f877344b6dbc0b2b468dc0d1ad-32f0299a.png",y="/assets/dd8f36e25d804dd4910c8b77f6cf61ac-4ac683a5.png",C="/assets/516182574cef406ba5677dcae94af1c4-f93062b4.png",z="/assets/09ab8f4b694044e78e5d9183a75021bd-92a35481.png",$="/assets/7971c29ea13841a1b90b1fd493d9e57e-17288137.png",B="/assets/629aea7721564ad8ac23d32a27b60f99-1f3532b8.png",E="/assets/c068df2a697244c7a3fc3fc33e0e42dd-69fbe571.png",x="/assets/80a0ff0abf32453f8d966fb1ffe10279-cc4dec90.png",D="/assets/f55dfe8b80de4a77b8618a181814ec69-08032e6a.png",U="/assets/e666dff4d7144da1b5a0e4b6bfa4597e-fe5f8a16.png",I="/assets/015dcc2bdd4f4244b7034995ce9035e9-935d7ca5.png",j="/assets/9d5d684fa07549b78a9adf565280c2b0-60a4861f.png",L="/assets/9e1979e1038d437b88951082aa332710-4df669a6.png",R="/assets/6225b212a9404232910262ef65ddaa36-44aa73e7.png",T="/assets/f43630eee1a34256acd3ba9c0d3c3b3e-3353067f.png",S="/assets/28a885efd96e46178ddba7c7413d4056-c0d61faa.png",A="/assets/50e770eaebc6498e9fc00c52e599de6e-c123e368.png",J="/assets/b141078084894551b7ae3cb0b000cfb5-a13e4c6e.png",N="/assets/5b385eebd9aa47188deac79003ec21a3-f64ea11b.png",O="/assets/17e6e2ee83f04eef86389aa776b892ca-2df7245b.png",P="/assets/b44140426aeb441e9137e1680b85d1b4-2fc5c42c.png",w="/assets/3c1d22af04bd450891a17cb01186b1d3-8ce2856c.png",F="/assets/e3f2e0df473e4eb18a761b8094615a36-c3bff801.png",M={},V=a("hr",null,null,-1),H=a("h4",{id:"写在前面",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#写在前面","aria-hidden":"true"},"#"),n(" 写在前面：")],-1),Y=a("pre",null,[a("code",null,`本文是对公司项目做的一次自动化实战。公司架构分新旧两版，本文是对旧版本的一次实战。且由于maven仓库需内网环境的原因，选择非maven项目进行实战。
笔者在测试完成后已在个人服务器将所有源码移除，且本文未展示任何源码信息。
`)],-1),G={id:"_1-ci-cd",tabindex:"-1"},K=a("a",{class:"header-anchor",href:"#_1-ci-cd","aria-hidden":"true"},"#",-1),X={href:"http://1.CI/CD",target:"_blank",rel:"noopener noreferrer"},Z=p(`<h3 id="_1-1-何为ci-cd" tabindex="-1"><a class="header-anchor" href="#_1-1-何为ci-cd" aria-hidden="true">#</a> 1.1 何为CI/CD</h3><pre><code>   根据互联网上绝大多数的说法，CI/CD其实是三个概念，包括了一个CI和两个CD。分别是 Continuous Integration（持续集成）， Continuous Delivery（持续交付）和 Continuous Deployment（持续部署）。
   简言之，CI/CD旨在打通软件开发与交付部署的链路，使各个环节形成通路，持续提高开发效率与代码品质。
</code></pre><h3 id="_1-2-为何ci-cd" tabindex="-1"><a class="header-anchor" href="#_1-2-为何ci-cd" aria-hidden="true">#</a> 1.2 为何CI/CD</h3><pre><code>CI/CD有何目的？其核心还是自动化，通过自动化的手段来提高代码质量，提升程序开发体验，更为重要的是缩短软件的交付时间。
此外，可参考PDCA戴明环，恰如其分的计划实施检查处置，可以使得整个项目质量呈螺旋式上升。CI/CD持续集成也可通过自动化步骤将整个项目的开发，测试，部署，交付联通。及时发现问题，处置问题，发现新的问题，处置新的问题... ...
</code></pre><h3 id="_1-3实战ci-cd" tabindex="-1"><a class="header-anchor" href="#_1-3实战ci-cd" aria-hidden="true">#</a> 1.3实战CI/CD</h3><pre><code>就笔者个人而言，我所在的项目在项目初期就已在云平台实现持续集成，持续部署。
项目为旧版本项目，通过maven进行包管理。持续集成思路为：将整个后端代码打包后上传到maven仓库，前台应用包根据坐标引用后端的jar包。将前台应用包与后台代码的持续集成巧妙转化为后台打包推送仓库与前台应用包持续集成持续部署。
同时使用容器技术，对版本镜像进行管理，另有基于Kubernetes的容器调度与管理平台，对应用进行监控与告警。总的来说在较大程度上简化集成与部署步骤，同时对镜像版本规范管理，也有益于应对升级事故。
但也正如上文所述，该部署方式较大程度上弱化了后台代码的持续集成与持续部署。例如：码农甲更改了后台代码，希望能在测试环境测试，则他需要先将后台代码打包上传，再调度前台应用的流水线发版。
相较于上面的场景，想象如下的场景：程序员乙今日修改了后台代码，检查无误后就将代码推送到版本库，版本库识别到改动，调度CI/CD工具对改动代码进行集成与部署，并将构建结果邮件告知程序员乙以及项目同事。注意，此处集成与部署的是整个应用包，而不仅是后台，也就是说只需要提交代码，然后等邮件即可，极大程度简化步骤。
</code></pre><hr><h2 id="_2-svn触发jenkins自动构建" tabindex="-1"><a class="header-anchor" href="#_2-svn触发jenkins自动构建" aria-hidden="true">#</a> 2.SVN触发Jenkins自动构建</h2><h3 id="_1-前置说明" tabindex="-1"><a class="header-anchor" href="#_1-前置说明" aria-hidden="true">#</a> 1.前置说明</h3>`,9),Q={href:"http://1.CI/CD%E5%B7%A5%E5%85%B7%E6%AD%A4%E5%A4%84%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AFJenkins%EF%BC%8C%E8%BE%83%E4%B8%BA%E4%B8%BB%E6%B5%81%E3%80%82",target:"_blank",rel:"noopener noreferrer"},W=a("li",null,[a("ul",null,[a("li",null,"注意：Jenkins构建代码时占用内存较大。笔者个人2+2的云服务器完全不够，一构建内存会狂飙至100%。")])],-1),aa=a("li",null,"2.互联网上较多的资源介绍的是maven打包，因此这里就不过多介绍maven项目的CI/CD。此处选择ant打包。",-1),na=a("li",null,"3.代码版本管理网上较多资源选择git，此处选择svn，更加切合项目实际。",-1),sa=a("li",null,"4.除上述所需环境外，还需Java环境，数据库（此处选择mysql5.7），以及默认已配置好svnhttp访问的httpd，跨主机调用时的内网穿透等。",-1),ta=a("li",null,[a("ul",null,[a("li",null,"一般情况不需要内网穿透，但正如笔者所述。2+2的云服务器难堪大用，因此将jerkins部署在本地，但svn库放在远程，svn钩子函数需要触发本地构建，因此需要用到内网穿透。")])],-1),pa=p('<hr><h3 id="_2-实操步骤" tabindex="-1"><a class="header-anchor" href="#_2-实操步骤" aria-hidden="true">#</a> 2.实操步骤</h3><h4 id="_2-1-前置相关配置" tabindex="-1"><a class="header-anchor" href="#_2-1-前置相关配置" aria-hidden="true">#</a> 2.1.前置相关配置</h4><h5 id="注-基础环境配置忽略" tabindex="-1"><a class="header-anchor" href="#注-基础环境配置忽略" aria-hidden="true">#</a> 注：基础环境配置忽略</h5><ul><li>1.Jenkins所需插件 <ul><li>Subversion svn版本管理</li><li>Ant Plugin ant打包</li><li>Publish Over SSH ssh远程推送</li><li>发送邮件通知</li></ul></li><li>2.Jenkins系统配置 <ul><li>Jenkins url与系统邮件地址 <img src="'+u+'" alt="e214699919200ee2a017339d1062ba83.png" loading="lazy"></li><li>邮件通知相关配置（注意：邮件密钥需要自己去相关邮箱配置授权码。另：这里是163邮箱的配置。） <img src="'+i+'" alt="ab69680a31eeb6d751512f12fc60afe8.png" loading="lazy"></li><li>右下有高级设置，其他账户也可配置上 <img src="'+k+'" alt="9cc737196d5227be0fa03fca77dc8255.png" loading="lazy"></li><li>默认正文内容与默认收件人 <img src="'+r+'" alt="5f1d270a514666a376177fe4f3cc7c7e.png" loading="lazy"></li><li>默认标题与正文（资源来自互联网，源码在步骤最后） <img src="'+d+'" alt="05967bb446481adcec518f22bf8d5747.png" loading="lazy"></li><li>邮件通知配置 <img src="'+g+'" alt="3af44e486101536005daa33070a03d68.png" loading="lazy"></li><li>SSH推送配送 <img src="'+v+'" alt="f2213d814a02872b7565cd465bdd45dc.png" loading="lazy"></li><li>全局的jdk配置以及ant配置 <img src="'+m+'" alt="b8172cf2ae558d2685a5bda4e33d97cf.png" loading="lazy"><img src="'+b+`" alt="5a449b68df3e400526c1469a24089c02.png" loading="lazy"></li></ul></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>构建通知:\${BUILD_STATUS} - \${PROJECT_NAME} - Build # \${BUILD_NUMBER} !
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>\${ENV, var=&quot;JOB_NAME&quot;}-第\${BUILD_NUMBER}次构建日志<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">leftmargin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8<span class="token punctuation">&quot;</span></span> <span class="token attr-name">marginwidth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">topmargin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8<span class="token punctuation">&quot;</span></span> <span class="token attr-name">marginheight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">offset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>95%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cellpadding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cellspacing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span>
        <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span> 11pt<span class="token punctuation">;</span> <span class="token property">font-family</span><span class="token punctuation">:</span> Tahoma<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> sans-serif</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>(本邮件是程序自动下发的，请勿回复！)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#0000FF<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>构建结果 - \${BUILD_STATUS}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#0B610B<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>构建信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>项目名称 ： \${PROJECT_NAME}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>构建编号 ： 第\${BUILD_NUMBER}次构建<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>SVN 版本： \${SVN_REVISION}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>触发原因： \${CAUSE}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>构建日志： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${BUILD_URL}console<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\${BUILD_URL}console<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>构建  Url ： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${BUILD_URL}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\${BUILD_URL}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>工作目录 ： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${PROJECT_URL}ws<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\${PROJECT_URL}ws<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>项目  Url ： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${PROJECT_URL}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\${PROJECT_URL}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#0B610B<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Changes Since Last
                        Successful Build:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>历史变更记录 : <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${PROJECT_URL}changes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\${PROJECT_URL}changes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span> \${CHANGES_SINCE_LAST_SUCCESS,reverse=true, format=&quot;Changes for Build #%n:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>%c<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>&quot;,showPaths=true,changesFormat=&quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span>[%a]<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>%m<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>&quot;,pathFormat=&quot;    %p&quot;}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>Failed Test Results<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span>
                    <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span> 11pt<span class="token punctuation">;</span> <span class="token property">font-family</span><span class="token punctuation">:</span> Tahoma<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> sans-serif</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>$FAILED_TESTS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#0B610B<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>构建日志 (最后 100行):<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &lt;tr&gt;
            &lt;td&gt;Test Logs (if test has ran): &lt;a
                href=&quot;\${PROJECT_URL}ws/TestResult/archive_logs/Log-Build-\${BUILD_NUMBER}.zip&quot;&gt;\${PROJECT_URL}/ws/TestResult/archive_logs/Log-Build-\${BUILD_NUMBER}.zip&lt;/a&gt;
                &lt;br /&gt;
            &lt;br /&gt;
            &lt;/td&gt;
        &lt;/tr&gt; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>80<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> <span class="token attr-name">readonly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>readonly<span class="token punctuation">&quot;</span></span>
                    <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">font-family</span><span class="token punctuation">:</span> Courier New</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>\${BUILD_LOG, maxLines=100}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-创建一个构建任务" tabindex="-1"><a class="header-anchor" href="#_2-2-创建一个构建任务" aria-hidden="true">#</a> 2.2.创建一个构建任务</h4><ul><li>创建自由风格项目即可</li><li>源码管理选择svn <img src="`+q+'" alt="c297e8b6c343b56b8b2b1be01d4ebeb6.png" loading="lazy"></li><li>触发构建脚本与轮询都需勾选 <img src="'+f+'" alt="b1574653d2ba861cae51ea05e654cbd0.png" loading="lazy"></li><li>构建环境选择ant，ant与jdk选择前置的全局配置 <img src="'+_+'" alt="ec0700ea8ac0a3caa19a4f73b5596e55.png" loading="lazy"></li><li>构建步骤，ant的build.xml文件会在项目实践中贴出 <img src="'+h+'" alt="a7f33f651cf80fd43d8c4063b14a7131.png" loading="lazy"></li><li>构建后步骤增加消息推送与ssh远程推送 <img src="'+y+'" alt="3bffa9a74dfbaee5c0b38d5aa9a76cb5.png" loading="lazy"><img src="'+C+'" alt="daf78b37d599fff578a7846f1487cb57.png" loading="lazy"> （触发选择always） <img src="'+z+'" alt="8937eee9935c002c50385775ee0520eb.png" loading="lazy"> （ssh推送直接推送到所需要的lib文件夹下，且删除旧包，重新部署tomcat）! <img src="'+$+'" alt="10fcf8d01773b5ac26f150c903e3bf25.png" loading="lazy"></li><li>注意：前文触发构建时配置的token“baseOSPBuild”，是配置在svn仓库下，hooks里面的钩子函数。但我这里展示的是另一种脚本触发方式。 <img src="'+B+'" alt="acd3dba4e2a4b6f105d093d1a4bd5b60.png" loading="lazy"><img src="'+E+'" alt="600a0649b09966fad13fb3d5900e3611.png" loading="lazy"> 上图中admin及token在如图所示处配置 <img src="'+x+'" alt="ffb06955b3a08b5f51a3a9fd43995d13.png" loading="lazy"> @符号后面的域名是访问jenkins的域名。</li></ul><h4 id="_2-3-项目实战" tabindex="-1"><a class="header-anchor" href="#_2-3-项目实战" aria-hidden="true">#</a> 2.3.项目实战</h4><p>前置先删除之前的jar包 <img src="'+D+'" alt="d7f1f7ec6b6ff6062651a1c4c1652c60.png" loading="lazy"><img src="'+U+'" alt="710979eb76da8782f393760edbe92abd.png" loading="lazy"><img src="'+I+'" alt="5941c6498d9ec8525539dce250ca7193.png" loading="lazy"> 前台前置校验 <img src="'+j+'" alt="eac7045019eac2139ef45eaefe7da9c1.png" loading="lazy"><img src="'+L+'" alt="e622e034e0d1dc8b0a0dd565f8040d56.png" loading="lazy"> 后台提交代码触发整个项目构建 <img src="'+R+'" alt="b70625e3b1665deb201a449d8fec328e.png" loading="lazy"> 触发失败，未开启内网穿透 <img src="'+T+'" alt="52081f7d6edfe94ff53671c46639e2b0.png" loading="lazy"> 开启穿透后再次提交 <img src="'+S+'" alt="21c2c6c3bcaf47df6b1f0b8e067f0afb.png" loading="lazy"> 推送成功 <img src="'+A+'" alt="77cf498849203bd5c130821b9cf6896f.png" loading="lazy"> 成功触发自动构建 <img src="'+J+'" alt="7b9f2d87ac83ca39c3eedbec6ffc3d62.png" loading="lazy"> 邮箱收到构建结果 <img src="'+N+'" alt="c882a55bbc7cc35f049c292058fc3181.png" loading="lazy"> 前台验证 <img src="'+O+'" alt="0b7492d9f75bce58241eb1922094bc9c.png" loading="lazy"><img src="'+P+'" alt="9d5d62e78b15aac1ed84759795abdaa5.png" loading="lazy"> 后台类 <img src="'+w+'" alt="81c39ff476652b4faf4894c19f321545.png" loading="lazy"><img src="'+F+`" alt="cab9f7ad6e0d62d344786285d50e5f48.png" loading="lazy"> 另： 贴上build.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">basedir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.<span class="token punctuation">&quot;</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>baseOSP<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 引入配置文件 --&gt;</span>
<span class="token comment">&lt;!--    &lt;property file=&quot;build.properties&quot; /&gt;--&gt;</span>
    <span class="token comment">&lt;!-- 配置引用属性 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>src.dir1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>model1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>src.dir2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>model2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>build.dir<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>build<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lib.dir<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>libs<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>baseOSP<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>master-classpath<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileset</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${lib.dir}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*.jar<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pathelement</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${build.dir}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 编译生成class文件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>build<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Compile main source tree java files<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- 删除编译存放的classes文件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${build.dir}/classes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 新建编译存放的classes文件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mkdir</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${build.dir}/classes<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>copy</span> <span class="token attr-name">todir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${build.dir}/classes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 将项目中除会编译生成class文件的java文件之外其他类型的文件拷贝到对应的目录下，指定文件名后缀 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileset</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${src.dir1}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>**/*.xml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileset</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileset</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${src.dir2}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>**/*.xml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>copy</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- java编译 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javac</span> <span class="token attr-name">destdir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${build.dir}/classes<span class="token punctuation">&quot;</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.8<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.8<span class="token punctuation">&quot;</span></span>
               <span class="token attr-name">debug</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">deprecation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">optimize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
               <span class="token attr-name">encoding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>src</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${src.dir1}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- 编译所需要的jar包路径 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>classpath</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>master-classpath<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>javac</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javac</span> <span class="token attr-name">destdir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${build.dir}/classes<span class="token punctuation">&quot;</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.8<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.8<span class="token punctuation">&quot;</span></span>
               <span class="token attr-name">debug</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">deprecation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">optimize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">failonerror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
               <span class="token attr-name">encoding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>src</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${src.dir2}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- 编译所需要的jar包路径 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>classpath</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>master-classpath<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>javac</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">depends</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>build<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Compress the java class files to jar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mkdir</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${build.dir}/jar<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${build.dir}/jar/\${name}.jar<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>buildnumber</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${build.dir}/buildnum.txt<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 指定时间戳 可以调用TODAY --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tstamp</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>format</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TODAY<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyyy-MM-dd HH:mm:ss<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tstamp</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- 打包jar --&gt;</span>
        <span class="token comment">&lt;!-- includes 包含哪些后缀文件 空格分隔 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jar</span> <span class="token attr-name">destfile</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./\${name}.jar<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name">basedir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${build.dir}/classes<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name">includes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>**/*.class  **/*.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>zipfileset</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${lib.dir}/DBFormBuilder-1.2.26.jar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>zipfileset</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>zipfileset</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${lib.dir}/osp-base-sdk-1.1.330.jar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>zipfileset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jar</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--    &lt;target name=&quot;cleanup&quot;&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;delete dir=&quot;\${build.dir}/classes&quot; /&gt;--&gt;</span>
<span class="token comment">&lt;!--    &lt;/target&gt;--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-后续展望" tabindex="-1"><a class="header-anchor" href="#_3-后续展望" aria-hidden="true">#</a> 3.后续展望</h2><ul><li>本实例是在不使用maven，以及未上前后端分离应用的情况下作出的svn触发Jenkins持续集成的实例。前台应用包可单独创建流水线，通过svn钩子函数触发服务器tomcat重启即可。后台代码构建难度相较而言较高，与之相比已无说明意义，参照次实例应用即可。</li><li>前文提及的云服务器，内网穿透等使用因人而异。云服务器不做提及，内网穿透个人使用过ngrok和花生壳，推荐使用花生壳，ngrok虽然免费，但域名和服务器随机分配，稳定性差。使用云服务器及内网穿透等目的在于：证明ssh推送几svn远程触发的可行性。</li><li>Jenkins另可与jmeter，sonar协同使用，提升代码品质，降低交付风险。</li><li>相关源码已在个人svn服务器尽数移除。</li></ul>`,14);function ea(ca,oa){const s=l("ExternalLinkIcon");return c(),o("div",null,[V,H,Y,a("h2",G,[K,n(),a("a",X,[n("1.CI/CD"),t(s)])]),Z,a("ul",null,[a("li",null,[a("a",Q,[n("1.CI/CD工具此处使用的是Jenkins，较为主流。"),t(s)])]),W,aa,na,sa,ta]),pa])}const ua=e(M,[["render",ea],["__file","非maven项目实现CI-CD持续集成（Jenkins）.html.vue"]]);export{ua as default};
